<% layout("/layouts/boilerplate.ejs") %>

<body class="bg-light py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10">
        <div class="card shadow-lg rounded-4 border-0">
          <div class="card-body p-5">

            <h3 class="text-center text-primary fw-bold mb-4">Create New Listing</h3>

            <form method="post" action="/listings"  enctype="multipart/form-data"  class="needs-validation" novalidate>

              <div class="mb-3">
                <label class="form-label fw-semibold">Title</label>
                <input type="text" class="form-control rounded-3" name="listing[title]" placeholder="Enter title" required>
              </div>

              <div class="mb-3">
                <label class="form-label fw-semibold">Description</label>
                <textarea class="form-control rounded-3" name="listing[description]" rows="3" placeholder="Enter description" required></textarea>
              </div>
<!-- 
              <div class="mb-3">
                <label class="form-label fw-semibold">Image URL</label>
                <input type="text" class="form-control rounded-3" name="listing[image]" placeholder="Enter image URL" >
              </div> -->
              <div class="mb-3">
                <label class="form-label fw-semibold">Image Upload</label>
                <input type="file" class="form-control rounded-3" name="listing[image]"  >
              </div>

              <div class="mb-3">
                <label class="form-label fw-semibold">Price (â‚¹)</label>
                <input type="number" class="form-control rounded-3" name="listing[price]" placeholder="Enter price" required>
              </div>

              <div class="mb-3">
                <label class="form-label fw-semibold">Location</label>
                <input type="text" class="form-control rounded-3" name="listing[location]" placeholder="Enter location" required>
              </div>

              <div class="mb-4">
                <label class="form-label fw-semibold">Country</label>
                <input type="text" class="form-control rounded-3" name="listing[country]" placeholder="Enter country" required>
              </div>

              <div class="d-grid">
                <button class="btn btn-primary btn-lg rounded-3" type="submit">Submit Listing</button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Validation (Optional) -->
  <script>
    (() => {
      'use strict';
      const forms = document.querySelectorAll('.needs-validation');
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    })();
  </script>
</body>
